{% extends 'base.html' %}

{% block contents %}
  <h1>{{ user.username }}さんのマイページ</h1>

  <h2>ユーザー情報</h2>
  <table>
    <tr>
      <th>ユーザー名</th>
      <td>{{ user.username }}</td>
    </tr>
    <tr>
      <th>メールアドレス</th>
      <td>{{ user.email }}</td>
    </tr>
    <tr>
      <th>住所</th>
      <td>{{ user.address }}</td>
    </tr>
    <tr>
      <th>電話番号</th>
      <td>{{ user.phone_number }}</td>
    </tr>

  </table>

  <h2>仮契約中のペット</h2>
  {% if contract_pets %}
    <table>
      <thead>
        <tr>
          <th>種類</th>
          <th>契約状況</th>
          <th>契約開始日</th>
          <th>契約終了日</th>
          <th>大きさ</th>
          <th>色</th>
          <th>年齢</th>
          <th>品種</th>
          <th>病歴</th>
          <th>性格</th>
          <th>性別</th>
          <th>アクション</th>
        </tr>
      </thead>
      <tbody>
        {% for karikeiyaku in contract_pets %}
          <tr>
            <td>{{ karikeiyaku.pet.type }}</td>
            <td>{{ karikeiyaku.status }}</td>
            <td>{{ karikeiyaku.created_at|date:"Y年m月d日" }}</td> <!-- 契約開始日を表示 -->
            <td>{{ karikeiyaku.end_date }}</td> <!-- 契約終了日を表示 -->
            <td>{{ karikeiyaku.pet.size }}</td>
            <td>{{ karikeiyaku.pet.color }}</td>
            <td>{{ karikeiyaku.pet.age }}</td>
            <td>{{ karikeiyaku.pet.kinds }}</td>
            <td>{% if show_disease %}{{ karikeiyaku.pet.disease }}{% else %}なし{% endif %}</td>
            <td>{{ karikeiyaku.pet.personality }}</td>
            <td>{{ karikeiyaku.pet.sex }}</td>
            <td>
                <a href="{% url 'karikeiyaku:cancel' karikeiyaku.pet.id %}?from_mypage=true">キャンセル</a>
            </td>
          </tr>
        {% endfor %}
      </tbody>
    </table>
  {% else %}
    <p>現在、仮契約中のペットはありません。</p>
  {% endif %}
{% endblock %}
